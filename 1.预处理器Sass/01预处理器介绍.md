<!--
 * @Author: zt zhoutao@ydmob.com
 * @Date: 2024-05-08 18:13:16
 * @LastEditors: zt zhoutao@ydmob.com
 * @LastEditTime: 2024-05-08 19:19:16
 * @FilePath: /CSS-engineering/1.预处理器Sass/01预处理器介绍.md
 * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
# 预处理器介绍

基于预处理技术的语言，我们称之为CSS预处理语言，该语言会为你提供一套增强语法，书写样式时使用该预处理语言提供的增强语法，书写完后编译成CSS语言即可

CSS预处理的出现，解决了如下问题：

1. 代码组织： 通过嵌套、模块化和文件引入等功能，使CSS代码结构更加清晰，便于管理和维护
2. 变量和函数：支持自定义变量和函数，增强代码的可重用性和一致性
3. 代码简洁：通过简洁的语法结构和内置函数，减少代码冗余，提高开发效率
4. 易于扩展：可以通过插件系统扩展预处理器的功能，方便添加特性

目前前端领域常见的 CSS预处理器：

1. Sass
2. Less
3. Stylus

## Sass

Sass是最早出现的CSS预处理器，该预处理器有两种语法格式（2006年）

- 锁进式语法

```scss
.class
    color: red;
    font-size: 14px;
```

- 类CSS语法

```scss
$primary-color: red;
.class {
    color: red;
    font-size: 14px;
    .demo{
        color: $primary-color;
    }
}
```

Sass提供了很多丰富的功能，列入声明变量、嵌套、混合、继承、函数等，另外Sass还有强大的社区支持及丰富的插件资源，因此Sass比较适合大型项目以及团队合作

## Less

Less也是一个比较流行的CSS预处理器，该预处理器是在2009年发布的，该预处理器借鉴了Sass的长处，并在此基础上兼容了CSS语法

```less
@primary-color: red;
.class {
    color: red;
    font-size: 14px;
    .demo{
        color: @primary-color;
    }
}
```

早期的Sass一开始只有缩进式语法，由于less兼容原生CSS语法，Less的出现降低了开发者的学习成本，
但是编程功能相比Sass要弱一些，并且社区和插件也没有Sass丰富，Less的出现促进了Sass的发展，出现了Sass的类CSS语法

## Stylus

Stylus是2010年发布的，和Sass一样有两种语法，社区规模较小

```stylus
primary-color = red
.class
    color: red
    font-size: 14px
    .demo
        color: primary-color
```

## Sass快速入门

最初的时候Sass采用的是缩进式敏感语法，后缀名为``.sass``，编写完毕之后，需要通过基于``Ruby``的``Ruby sass``的编译器编译为普通的的css，因此，在早期的时候，如果你想使用Sass，你是需要安装``Ruby``环境的

到了 2009 年的时候， Less 的出现给 Sass 带来竞争压力，因为 Less 是基于原生 CSS 语法进行扩展，使用者没有什么学习压力，于是 *Natalie Weizenbaum* 和 *Chris Eppstein* 为 Sass 引入了新的类 CSS 语法，也是基于原生的 CSS 进行语法扩展，文件的后缀名为 scss。虽然文件的后缀以及语法更新了，但是功能上面仍然支持之前 sass 所支持的所有功能，加上 sass 本身插件以及社区就比 less 强大，因此 Sass 重新变为了主流。

- *Dart Sass*：由 *Sass* 官方团队维护，使用 *Dart* 语言编写。它是目前推荐的 *Sass* 编译器，因为它是最新的、功能最全的实现。

    *GitHub* 仓库：*https://github.com/sass/dart-sass*

- *LibSass*：使用 *C/C++* 编写的 *Sass* 编译器，它的性能优于 *Ruby* 版本。*LibSass* 有多个绑定，例如 *Node Sass*（ *Node.js* 绑定）和 *SassC*（*C* 绑定）。

    *GitHub* 仓库：*https://github.com/sass/libsass*

- *Ruby Sass*：最早的 *Ruby* 实现，已被官方废弃，并建议迁移到 *Dart Sass*。

### Sass快速上手

```bash
pnpm add sass -D
```

接下来在 src/index.scss 里面写入如下的 scss 代码：

```scss
$primary-color: #4caf50;

.container {
    background-color: $primary-color;
    padding: 20px;

    .title {
        font-size: 24px;
        color: white;
    }
}
```

接下来我们就会遇到第一个问题，编译。

这里我们就可以使用 sass 提供的 compile 方法进行编译。在 src 目录下面创建一个 index.js 文件，记入如下的代码：

```js
// 读取 scss 文件
// 调用 sass 依赖提供的 complie 进行文件的编译
// 最终在 dist 目录下面新生成一个 index.css（编译后的文件）

const sass = require('sass'); // 做 scss 文件编译的
const path = require('path'); // 处理路径相关的
const fs = require('fs'); // 处理文件读写相关的

// 定义一下输入和输出的文件路径
const scssPath = path.resolve("src", "index.scss");
const cssDir = "dist"; // 之后编译的 index.css 要存储的目录名
const cssPath = path.resolve(cssDir, "index.css");

// 编译
const result = sass.compile(scssPath);
console.log(result.css);

// 将编译后的字符串写入到文件里面
if(!fs.existsSync(cssDir)){
    // 说明不存在，那就创建
    fs.mkdirSync(cssDir);
}

fs.writeFileSync(cssPath, result.css);
```
